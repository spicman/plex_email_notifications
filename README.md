Google AI Studio helped create the following web app.  Nothing special but I wanted a system (works great as a self hosted app and looks great on your mobile phone) that would allow me to have users subscribe to the PlexNotify service so I can send out emails regarding any downtime or maintenance on my Plex server.  You can easily modifying it for any kind of notifications.  I am not providing support just thought I would share the wonderful world of what Google AI Studio can do.  The rest is generated by AI Studio:


# Technologies Used
* Python: The primary programming language.
* Flask: A micro web framework for building the web application.
* Flask-Login: Handles user authentication (login, logout, session management).
* Flask-Bcrypt: Used for password hashing (security).
* python-dotenv: Loads environment variables from a .env file.
* SQLite: A lightweight, file-based database to store user accounts, notification templates, and email settings.
* Bleach: A library to sanitize HTML input, preventing cross-site scripting (XSS) vulnerabilities.
* HTML/CSS/JavaScript: For building the user interface (front-end).
* Quill.js: A modern rich text editor for creating and editing notification templates.
* Docker: A platform for containerizing the application, making it easy to deploy and run in different environments.
* Docker Compose: A tool for defining and managing multi-container Docker applications.

# Plex Email Notifications

A Python-based web application that allows you to send email notifications related to your Plex media server.  This project enables user registration, customizable email templates, and admin management features, all within a Docker container for easy deployment.

## Features

*   **User Registration and Authentication:** Secure user accounts with password hashing.
*   **Email Notifications:**  Send custom email notifications to users.
*   **Admin Panel:**  Manage users, email settings, and notification templates.
*   **Template Management:** Create, edit, and delete email templates with a rich text editor (Quill.js).
*   **Notification History:** Track sent notifications.
*   **Dockerized:** Easy deployment and setup with Docker and Docker Compose.
*   **Dark Mode:** Toggle between light and dark themes.

## Prerequisites

Before you begin, ensure you have the following installed:

*   **Docker:**  [https://www.docker.com/get-started](https://www.docker.com/get-started)
*   **Docker Compose:** Usually included with Docker Desktop, or install separately.  [https://docs.docker.com/compose/install/](https://docs.docker.com/compose/install/)

## Installation and Setup

1.  **Clone the Repository:**

    ```bash
    git clone https://github.com/spicman/plex_email_notifications.git
    cd plex-email-notifications
    ```

2.  **Configure Environment Variables:**

    *   Create a `.env` file in the root directory of the project.
    *   Add the following variables to the `.env` file, replacing the example values with your own:

        ```
        SECRET_KEY=your_secret_key_here  # Generate a strong, random key
        DATABASE=database.db           # Database filename (optional: can leave as database.db)
        EMAIL_HEADER_IMAGE_URL=https://example.com/path/to/your/plex_header.png  #Optional - URL to image
        ```
    *You can generate a `SECRET_KEY` by running the following python code in your terminal:
    ```python
    import secrets
    import string

    alphabet = string.ascii_letters + string.digits + string.punctuation
    secret_key = ''.join(secrets.choice(alphabet) for i in range(50))
    print(secret_key)
    ```

3.  **Configure SMTP settings for email functionality:**

    *   See below under Usage #3


4.  **Build and Run the Application with Docker Compose:**

    ```bash
    docker-compose up --build
    ```

    This command will:

    *   Build the Docker image based on the `Dockerfile`.
    *   Start the application container, mapping port 5000 on your host machine to port 5000 in the container.

5.  **Access the Application:**

    Open your web browser and go to `http://localhost:5000`.

## Usage

1.  **Register an Account:**
    *   Go to the registration page (`/register`) and create a new user account.

2.  **Login:**
    *   Log in with your newly created account or the admin account if this is the first created account.
        *Note:* the first account registered is automatically given administrator privileges

3.  **(Admin Only) Configure Email Settings:**

    *   If you are the first user, you are automatically granted administrator access
    *   Navigate to the "Admin" page.
    *   Click "Email Settings" and enter your SMTP server details.
        *Make sure to enter the correct credentials and enable "Less secure app access" if using Gmail (or use an App Password).*

4.  **Explore the Application:**

    *   Create and customize email templates.
    *   Send notifications to subscribed users.
    *   Manage user accounts (if you are an administrator).
    *   Edit your personal options and subscribe to notifications.

## Important Considerations

*   **Security:**  In a production environment, use a more robust database (e.g., PostgreSQL) and configure HTTPS.  Also, carefully manage your environment variables and avoid storing sensitive information directly in your code.
*   **Email Sending:**  Be aware of email sending limits and best practices to avoid being flagged as spam. Consider using a dedicated email sending service (e.g., SendGrid, Mailgun) for production deployments.
*   **Admin User:** The first user to register is automatically made an administrator.
*   **Database Persistence:** The SQLite database is stored in the `database.db` file within the project directory. Docker volumes are used, so this database will be persisted even if the container is stopped or removed.
*   **Email Header:** The application attempts to use the image defined by the `EMAIL_HEADER_IMAGE_URL` variable. Be sure to update the environment variable with your desired image.

## Contributing

Do what you like with this :)

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

```
################################################################
Project Structure:
################################################################

plex_email_notifications/
├── static/
│   ├── quill
│   │   ├── quill.js
│   │   └── quill.snow.css
│   ├── apple-touch-icon.png
│   ├── favicon-96x96.png
│   ├── favicon.ico
│   ├── favicon.svg
│   ├── plex_header.png
│   ├── script.js
│   ├── site.webmanifest
│   ├── style.css
│   ├── web-app-manifest-192x192.png
│   └── web-app-manifest-512x512.png
├── templates/
│   ├── base.html
│   ├── edit_template.html
│   ├── edit_header.html
│   ├── edit_setting.html
│   ├── error.html
│   ├── forgot_password.html
│   ├── index.html
│   ├── login.html
│   ├── notification_history.html
│   ├── notification_management.html
│   ├── notification.html
│   ├── options.html
│   ├── register.html
│   ├── reset_password.html
│   ├── send_notification.html
│   ├── subscribe.html
│   ├── success.html
│   ├── template_notifications.html
│   └── user_management.html
├── .dockerignore
├── .env
├── app.py
├── config.py
├── database.db
├── docker-compose.yml
├── Dockerfile
└── requirements.txt
```

Some Screenshots:

![image](https://github.com/user-attachments/assets/1000b927-0edf-407b-abd2-a3b30391f332)
![image](https://github.com/user-attachments/assets/0efa8cd8-6961-4698-9263-207c57a54176)
![image](https://github.com/user-attachments/assets/ee87d833-8753-482c-a169-35b71b673ff2)
![image](https://github.com/user-attachments/assets/847c5d69-29fd-4194-916b-b9a589789880)
![image](https://github.com/user-attachments/assets/06ec58b7-2e2d-4e49-9875-74979e57e4a1)
![image](https://github.com/user-attachments/assets/cc8951ff-a9cb-45e1-8e2b-3b07a759a56f)





